<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Frenet Optimal Trajectory - 交通仿真文档</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Frenet Optimal Trajectory";
        var mkdocs_page_input_path = "algorithms\\Planning_\\frenet_lattice.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> 交通仿真文档
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">主页</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">入门</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../start_introduction/">介绍</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../start_quickstart/">快速启动包安装</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_first_steps/">第一步</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tutorials/">教程</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">构建 Carla</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_carla/">构建 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_linux/">Linux 上编译</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_windows/">Windows 上编译</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_update/">Carla 更新</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_system/">编译系统</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_docker/">Docker 中的 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_faq/">常问的问题</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Carla 主题</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../foundations/">概念和基础</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../core_world/">第一、世界和客户端</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../core_actors/">第二、参与者和蓝图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../core_map/">第三、地图和导航 </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../core_sensors/">第四、传感器和数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../development_tutorials/">开发</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../custom_assets_tutorials/">自定义资产</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_content_authoring_maps/">内容创作 - 地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_content_authoring_vehicles/">内容创作 - 车辆</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">交通仿真</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ts_traffic_simulation_overview/">交通</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_traffic_manager/">交通管理器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_sumo/">和 SUMO 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_scenic/">Scenic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">行人</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_control_walker_skeletons/">控制行人骨骼</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_generate_pedestrian_navigation/">生成行人导航</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">高级概念</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_opendrive/">OpenDRIVE 独立模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_recorder/">记录器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_rendering_options/">渲染选项</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_rss/">责任敏感安全</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_synchrony_timestep/">同步和时间步长</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_benchmarking/">基准性能</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_agents/">Carla 智能体</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">资源</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../python_api/">Python API 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ref_cpp/">C++ 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../bp_library/">蓝图库</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../catalogue/">Carla 目录</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ref_recorder_binary_file_format/">记录器二进制文件格式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ref_sensors/">传感器参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ext_docs/">扩展文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">自定义地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_custom_map_overview/">Carla 中自定义地图的概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_generate_map/">在 RoadRunner 中创建地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_add_map_package/">在 Carla 包导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_add_map_source/">在 Carla 源构建中导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_add_map_alternative/">导入地图的替代方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_manual_map_package/">手动准备地图包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_custom_layers/">自定义地图：分层地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_custom_add_tl/">自定义地图：红绿灯和标志</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_custom_road_painter/">自定义地图：道路画家</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_custom_weather_landscape/">自定义地图：天气和景观</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_openstreetmap/">使用 OpenStreetMap 生成地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_M_custom_buildings/">自定义地图：程序建筑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_digital_twin/">数字孪生工具</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">大地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../large_map_overview/">大地图概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../large_map_roadrunner/">在RoadRunner中创建大地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../large_map_import/">导入/打包大地图</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（通用）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_add_friction_triggers/">添加摩擦触发器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_control_vehicle_physics/">控制车辆物理模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_retrieve_data/">检索仿真数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../build_docker_unreal/">在 Docker 中构建虚幻引擎和 Carla</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（资产）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_A_add_vehicle/">添加新车辆</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_A_add_props/">添加新道具</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_A_create_standalone/">创建独立包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_A_material_customization/">材质定制</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（开发人员）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_contribute_assets/">如何升级内容</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_create_sensor/">创建一个传感器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_create_semantic_tags/">创建语义标签</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_customize_vehicle_suspension/">自定义车辆悬架</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_generate_colliders/">生成详细碰撞</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_make_release/">发布版本</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_D_windows_debug/">调试程序</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">示例</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_traffic_light/">交通灯的配置和使用</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_traffic_prediction/">流量预测</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Carla 生态系统</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ecosys_iss/">ISS 智能驾驶系统</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../plugins_carlaviz/">Web 可视化器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ros_documentation/">ROS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ecosys_femfx/">有限元变形材料虚幻插件</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_carsim_integration/">CarSim 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_rllib_integration/">RLlib 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_chrono/">Chrono 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../OpenRadioss/use_OpenRadioss_windows/">OpenRadios 有限元仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../adv_ptv/">PTV-Vissim 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ecosys_ansys/">Ansys 实时雷达模型</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/darkscyla/MATLAB-Carla-Interface">Matlab 接口</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tuto_G_G29_windows/">罗技 G29 方向盘</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">贡献</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cont_contribution_guidelines/">贡献指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cont_code_of_conduct/">行为准则</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cont_coding_standard/">编码标准</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../cont_doc_standard/">文档标准</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">其他</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://ww2.mathworks.cn/help/roadrunner/index.html">RoadRunner</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://ww2.mathworks.cn/help/roadrunner-scenario/index.html">RoadRunner Scenario</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://bbs.carla.org.cn/">Carla 中文站</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/OpenHUTB/engine_doc">虚幻引擎教程</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../todo/">待做列表</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">交通仿真文档</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Frenet Optimal Trajectory</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="frenet_lattice">frenet_lattice</h1>
<!-- lqz27, lirj19 -->

<p>The frenet_lattice planner is a lattice <strong>local planner</strong> that implements the trajectory  generation algorithm proposed in the paper <a href="https://fileadmin.cs.lth.se/ai/Proceedings/ICRA2010/MainConference/data/papers/1650.pdf"><em>Optimal Trajectory Generation for Dynamic Street Scenarios in a Frenét Frame</em></a>. 
In the frenet_lattice planner, you can just use <a href="https://github.com/CAS-LRJ/ISS/blob/main/ISS/algorithms/planning/local_planner/lattice_planner.py">LatticePlanner.run_step</a> to get trajectory with inputs, such as current Cartesian state, etc.</p>
<h2 id="inputs">Inputs</h2>
<p>The inputs of frenet_lattice planner can come from the Carla simulator or from physical environments; 
they include several types of data, such as</p>
<ul>
<li>a <strong>map</strong> providing the road network related information to the frenet_lattice planner such as the lane width of the different roads, traffic light positions, standard speed limits, etc. The most common types of maps are: lanelet, OpenDRIVE, etc.;</li>
<li>the <strong>path</strong> generated by the global <a href="index.html#route">route planner</a>, providing a reference course leading to the desired destination;</li>
<li>some <strong>obstacle information</strong> about obstacles on the current road, such as their position, yaw, bounding box, etc.;</li>
<li>the <strong>decision</strong> generated by <a href="index.html#behavior">behavior planner</a> on how to control the vehicle, such as the velocity to keep, Following, Merging, Stopping, etc.</li>
</ul>
<h2 id="outputs">Outputs</h2>
<p>The output of frenet_lattice is a trajectory which contains position and speed of the vehicle. Such a trajectory must be dynamically feasible for the vehicle, comfortable for the passenger, and avoid collisions with obstacles detected by the on-board sensors. In practice, the output consists of </p>
<ul>
<li>the <strong>trajectory</strong> to follow, including information about speed, position, and its cost.</li>
</ul>
<h2 id="frenetpath-class">FrenetPath <a name="FrenetPath"></a> (<em>class</em>)</h2>
<p>Store the trajectories(paths) which are generated by frenet_lattice planner. This class not only contain Frenet coordinate <code>[s, s_d, s_dd, s_ddd, d, d_dd, d_ddd]</code> and Cartesian coordinate <code>[x, y, yaw, ds, c]</code>, but also cost of trajectory.</p>
<h3 id="instance-variables">Instance Variables</h3>
<ul>
<li><a name="FrenetPath.t"></a><strong><font color="#f8805a">t</font></strong> (<em>list(float <small>- seconds</small>)</em>)<br />
   Time of each Frenet point in Frenet path.</li>
<li><a name="FrenetPath.s"></a><strong><font color="#f8805a">s</font></strong> (<em>list(float <small>- meters</small>)</em>)<br />
   Frenet longitudinal movement. Also represents the arc length, indicates the distance a vehicle has traveled along the road centerline. The value of s can be used to denote the vehicle's position.</li>
<li><a name="FrenetPath.d"></a><strong><font color="#f8805a">d</font></strong> (<em>list(float <small>- meters</small>)</em>)<br />
   Frenet lateral offset. Indicates the lateral distance of the vehicle relative to the road centerline. The value of <em>d</em> can be used to represent the vehicle's lateral position. A positive value indicates the vehicle is on the right side of the road, while a negative value indicates the left side.</li>
<li><a name="FrenetPath.s_d"></a><strong><font color="#f8805a">s_d</font></strong> (<em>list(float <small>- m/s</small>)</em>)<br />
   Frenet longitudinal velocity. Indicates the speed of the vehicle in the direction along the road centerline.</li>
<li><a name="FrenetPath.d_d"></a><strong><font color="#f8805a">d_d</font></strong> (<em>list(float <small>- m/s</small>)</em>)<br />
   Frenet longitudinal velocity.Represents the derivative of lateral offset <em>d</em> with respect to time. It denotes the rate of change of lateral offset, indicating how rapidly the vehicle is changing its lateral position. </li>
<li><a name="FrenetPath.s_dd"></a><strong><font color="#f8805a">s_dd</font></strong> (<em>list(float <small>- m/s<sup>2</sup></small>)</em>)<br />
   Frenet longitudinal acceleration. Represents the rate of change of longitudinal velocity. It quantifies how quickly the vehicle is speeding up or slowing down along the road.</li>
<li><a name="FrenetPath.d_dd"></a><strong><font color="#f8805a">d_dd</font></strong> (<em>list(float <small>- m/s<sup>2</sup></small>)</em>)<br />
   Frenet lateral acceleration.Represents the rate of change of lateral velocity. It quantifies how quickly the lateral speed of the vehicle changes over time.</li>
<li><a name="FrenetPath.s_ddd"></a><strong><font color="#f8805a">s_ddd</font></strong> (<em>list(float <small>- m/s<sup>3</sup></small>)</em>)<br />
   Frenet longitudinal jerk. Represents the rate of change of longitudinal acceleration. It is related to driving comfort.</li>
<li><a name="FrenetPath.d_ddd"></a><strong><font color="#f8805a">d_ddd</font></strong> (<em>list(float <small>- m/s<sup>3</sup></small>)</em>)<br />
   Frenet lateral jerk.Represents the rate of change of lateral acceleration. It is related to driving comfort.</li>
<li><a name="FrenetPath.x"></a><strong><font color="#f8805a">x</font></strong> (<em>list(float <small>- seconds</small>)</em>)<br />
   Cartesian horizontal coordinate x-axis. It measures the horizontal distance of an object relative to a coordinate origin point. </li>
<li><a name="FrenetPath.y"></a><strong><font color="#f8805a">y</font></strong> (<em>list(float <small>- meters</small>)</em>)<br />
   Cartesian vertical coordinate y-axis. It measures the vertical distance of an object relative to a coordinate origin point. </li>
<li><a name="FrenetPath.yaw"></a><strong><font color="#f8805a">yaw</font></strong> (<em>list(float <small>- radians</small>)</em>)<br />
   Cartesian yaw angle. It is the orientation angle of the object.</li>
<li><a name="FrenetPath.ds"></a><strong><font color="#f8805a">ds</font></strong> (<em>list(float <small>- meters</small>)</em>)<br />
   Cartesian arc length. It is the distance between two trajectories' points.</li>
<li><a name="FrenetPath.c"></a><strong><font color="#f8805a">c</font></strong> (<em>list(float <small>- 1/radian</small>)</em>)<br />
   Cartesian curvature. It describes the degree of curvature of trajectories.</li>
<li><a name="FrenetPath.cv"></a><strong><font color="#f8805a">cv</font></strong> (<em>float</em>)
   Frenet longitudinal s(velocity) Cost of this trajectory. Initial with zero.</li>
<li><a name="FrenetPath.cd"></a><strong><font color="#f8805a">cd</font></strong> (<em>float</em>) <br />
   Frenet lateral d Cost of this trajectory. Initial with zero.</li>
<li><a name="FrenetPath.cf"></a><strong><font color="#f8805a">cf</font></strong> (<em>float</em>) <br />
   Final Cost of this trajectory. It is the sum of longitudinal and lateral Cost. Initial with zero.</li>
</ul>
<h2 id="latticeplanner-class">LatticePlanner <a name="LatticePlanner"></a> (<em>class</em>)</h2>
<p>LatticePlanner is a local planner which generate the best trajectory, so called  FrenetPath with inputs, including map, global waypoints, etc. </p>
<h3 id="instance-variables_1">Instance Variables</h3>
<ul>
<li><a name="LatticePlanner.route_graph"></a><strong><font color="#f8805a">route_graph</font></strong> (<em>DataType=Unkown</em>) <br />
   A graph that represents the road network based on a lanelet map and traffic rules. In FrenetPlanner, it's used to get left/right lane for lateral planning.</li>
<li><a name="LatticePlanner.waypoints_xy"></a><strong><font color="#f8805a">waypoints_xy</font></strong> (<em>list(list(float,float))</em>) <br />
   The list of xy coordinate which is the outputs of global planner which is so called global waypoints.  <br />
   For instance, <strong><span style="color:#ADD8E6">[[x<sub>0</sub>, y<sub>0</sub>], [x<sub>1</sub>, y<sub>1</sub>], ...]</span></strong>.</li>
<li><a name="LatticePlanner.state_cartesian"></a><strong><font color="#f8805a">state_cartesian</font></strong> (<em>list</em>) <br />
   Current cartesian state, defined as <strong><span style="color:#ADD8E6"> [x, y, yaw, v, a]</span></strong>, where x y is xy coordinates, yaw refers to rotation around the vertical axis, v is velocity, a is acceleration. state_cartesian is measured in <em><small>[meters, meters, radians, m/s, m/s<sup>2</sup>]</small></em>.</li>
<li><a name="LatticePlanner.state_frenet"></a><strong><font color="#f8805a">state_frenet</font></strong> (<em>list</em>) <br />
   Current frenet state, defined as  <strong><span style="color:#ADD8E6">[s, s_d, s_dd, d, d_d, d_dd]</span></strong>. Where, s s_d and s_dd represents Frenet longitudinal coordinate velocity and acceleration, d, d_d and d_dd represents lateral coordinate velocity and acceleration. state_frenet is measured in <em><small>[meters, m/s, m/s<sup>2</sup>, meters, m/s, m/s<sup>2</sup>]</small></em>.</li>
<li><a name="LatticePlanner.best_path"></a><strong><font color="#f8805a">best_path</font></strong> (<em>FrenetPath</em>) <br />
   The best trajectory(path) of FrenetPlanner based on current state_frenet.</li>
<li><a name="LatticePlanner.road_detector"></a><strong><font color="#f8805a">road_detector</font></strong> (<em>Sensor</em>) <br />
   Detect road. Return road line position.</li>
<li><a name="LatticePlanner.obstacle_detector"></a><strong><font color="#f8805a">obstacle_detector</font></strong> (<em>Sensor</em>) <br />
   Detect obstacle. Return <b> True </b> when obstacle is nearby the trajectory.</li>
</ul>
<h3 id="methods">Methods</h3>
<ul>
<li><a name="LatticePlanner._generate_target_course"></a><strong><font color="#7fb800">_generate_target_course</font></strong>(<font color="#00a6ed"><strong>self</strong></font>)<br />
Generates smooth reference line based on global waypoints by using <strong><span style="color:#ADD8E6">cubic spline</span></strong>. </li>
<li><strong>Return:</strong> <em><a href="#FrenetPath.x">rx</a></em>, <em><a href="#FrenetPath.y">ry</a></em>, <em><a href="#FrenetPath.yaw">ryaw</a></em>, <em><a href="#FrenetPath.c">rk</a></em>, <em><a href="#Spline2D">csp</a></em></li>
<li><a name="LatticePlanner._calc_frenet_paths"></a><strong><font color="#7fb800">_calc_frenet_paths</font></strong>(<font color="#00a6ed"><strong>self</strong></font>)<br />
Generates all <strong>frenet paths</strong> which just contain Frenet coordinate and cost but not Cartesian coordinate by sampling time <em><code>Ti</code></em>,  lateral d <em><code>lat_qp</code></em> and longitudinal s <em><code>lon_qp</code></em>.</li>
<li><strong>Return:</strong> <em><a href="#FrenetPath">frenet_paths</a></em> (<em>list(FrenetPath)</em>)</li>
<li><a name="LatticePlanner._calc_global_paths"></a><strong><font color="#7fb800">_calc_frenet_paths</font></strong>(<font color="#00a6ed"><strong>self</strong></font>, <font color="#00a6ed"><strong>fplist</strong></font>)<br />
Gets Cartesian coordinate of frenet_paths.</li>
<li><strong>Parameters:</strong><ul>
<li><code>fplist</code> (<em>list(FrenetPath)</em>) - <strong>frenet paths</strong> which just contain Frenet coordinate and cost but not Cartesian coordinate.  </li>
</ul>
</li>
<li><strong>Return:</strong> <em><a href="#FrenetPath">filtered_fplist</a></em> (<em>list(FrenetPath)</em>) - which contain Cartesian coordinate, Frenet coordinate and cost.</li>
<li><a name="LatticePlanner._check_paths"></a><strong><font color="#7fb800">_check_paths</font></strong>(<font color="#00a6ed"><strong>self</strong></font>, <font color="#00a6ed"><strong>fplist</strong></font>)<br />
Gets comfortable, kinematically feasible trajectories.</li>
<li><strong>Parameters:</strong><ul>
<li><code>fplist</code> (<em>list(FrenetPath)</em>) - <strong>frenet paths</strong> which contain Cartesian coordinate, Frenet coordinate and cost.</li>
</ul>
</li>
<li><strong>Return:</strong> <em><a href="#FrenetPath">fplist</a></em>(<em>list(FrenetPath)</em>) - which is comfortable and kinematically feasible.</li>
<li><a name="LatticePlanner.frenet_optimal_planning"></a><strong><font color="#7fb800">frenet_optimal_planning</font></strong>(<font color="#00a6ed"><strong>self</strong></font>)<br />
Gets best trajectory. First generates all trajectories which is not containing Cartesian coordinate by using methods <span style="color:#ADD8E6">LatticePlanner._generate_target_course</span>. Then gets Cartesian coordinate trajectories by using method <span style="color:#ADD8E6">LatticePlanner._calc_frenet_paths</span> and filters not kinematically feasible trajectories by using <span style="color:#ADD8E6">LatticePlanner._check_paths</span>. Finally, gets best trajectory by minimizing the cost.</li>
<li><strong>Return:</strong> <em><a href="#FrenetPath">best_path</a></em>(<em>FrenetPath</em>) - Trajectory with minimum cost.</li>
<li><a name="LatticePlanner.run_step"></a><strong><font color="#7fb800">run_step</font></strong>(<font color="#00a6ed"><strong>self</strong></font>, <font color="#00a6ed"><strong>state_cartesian</strong></font>)<br />
Main method of LatticePlanner which calls method frenet_optimal_planning to get a best trajectory.</li>
<li><strong>Parameters:</strong><ul>
<li><code>state_cartesian</code> (<em>[x, y, yaw, ds, c]</em>) - Currenet Cartesian coordinate of ego vehicle.</li>
</ul>
</li>
<li><strong>Return:</strong> <em><a href="#Trajectory">Trajectory(waypoints, speeds)</a>(_Trajectory</em>)<em> - which is the list of waypoint </em><code>[x,y]</code>_ and speed.</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../extra.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
