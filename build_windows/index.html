<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Windows 构建 - 驾驶仿真器文档</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Windows \u6784\u5efa";
        var mkdocs_page_input_path = "build_windows.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 驾驶仿真器文档
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">主页</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">入门</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../start_introduction/">介绍</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../start_quickstart/">快速启动包安装</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_first_steps/">第一步</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">构建 Carla</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../build_carla/">构建 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_linux/">Linux 构建</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Windows 构建</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#_1">第一部分：先决条件</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_2">系统要求</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_3">软件要求</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#_4">基础软件安装</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#python">Python 依赖项</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#_5">主要软件安装</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#carla">第二部分：构建 Carla</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#carla_1">克隆 Carla 存储库</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-assets">Get assets</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#set-unreal-engine-environment-variable">Set Unreal Engine environment variable</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#build-carla">Build CARLA</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#other-make-commands">Other make commands</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_update/">更新 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_system/">构建系统</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker/">Docker 中的 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_faq/">常问的问题</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">下一步</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_content_authoring_maps/">内容创作 - 地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_content_authoring_vehicles/">内容创作 - 车辆</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Carla 主题</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../foundations/">基础</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_concepts/">核心概念</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_world/">世界和客户端</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_actors/">参与者和蓝图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_map/">地图和导航 </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_sensors/">传感器和数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ts_traffic_simulation_overview/">交通</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development_tutorials/">开发</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../custom_assets_tutorials/">自定义资产</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">高级概念</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_recorder/">记录器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rendering_options/">渲染选项</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_synchrony_timestep/">同步和时间步长</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_benchmarking/">基准性能</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_agents/">Carla 智能体</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">交通仿真</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_traffic_manager/">交通管理器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_sumo/">SUMO 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_scenic/">Scenic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">资源</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../python_api/">Python API 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_cpp/">C++ 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bp_library/">蓝图库</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../catalogue/">Carla 目录</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_recorder_binary_file_format/">记录器二进制文件格式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_sensors/">传感器参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tutorials/">教程</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ext_docs/">扩展文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">插件</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins_carlaviz/">carlaviz — web 可视化器</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ROS 桥接器</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ros_documentation/">ROS 桥文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">自定义地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_map_overview/">Carla 中自定义地图的概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_map/">在 RoadRunner 中创建地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_package/">在CARLA包导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_source/">在 Carla 源构建中导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_alternative/">导入地图的替代方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_manual_map_package/">手动准备地图包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_layers/">自定义地图：分层地图: </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_add_tl/">自定义地图：红绿灯和标志</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_road_painter/">自定义地图：Road painter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_buildings/">自定义地图：程序建筑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_weather_landscape/">自定义地图：天气和景观</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_pedestrian_navigation/">生成行人导航</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">大型地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_overview/">大型地图概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_roadrunner/">在RoadRunner中创建大地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_import/">导入/打包大地图</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（通用）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_add_friction_triggers/">添加摩擦触发器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_vehicle_physics/">控制车辆物理模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_walker_skeletons/">控制行人骨骼</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_openstreetmap/">使用 OpenStreetMap 生成地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_retrieve_data/">检索模拟数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker_unreal/">在 Docker 中构建虚幻引擎和 Carla</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（资产）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_vehicle/">添加新车辆</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_props/">添加新道具</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_create_standalone/">创建独立包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_material_customization/">材料定制</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（开发人员）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_contribute_assets/">如何升级内容</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_sensor/">创建一个传感器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_semantic_tags/">创建语义标签</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_customize_vehicle_suspension/">自定义车辆悬架</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_generate_colliders/">生成详细碰撞</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_make_release/">发布版本</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Carla 生态系统</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ecosys_ansys/">Ansys 实时雷达模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_rllib_integration/">RLlib 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_carsim_integration/">CarSim 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_chrono/">Chrono 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_opendrive/">OpenDRIVE 独立模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_ptv/">PTV-Vissim 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rss/">责任敏感安全</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://carla.readthedocs.io/projects/ros-bridge/en/latest/">机器人操作系统</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">贡献</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_contribution_guidelines/">贡献指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_code_of_conduct/">行为准则</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_coding_standard/">编码标准</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_doc_standard/">文档标准</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">驾驶仿真器文档</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">构建 Carla</li>
      <li class="breadcrumb-item active">Windows 构建</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="windows">Windows 下的构建</h1>
<p>本指南详细介绍了如何在 Windows 上从源代码构建 CARLA。有两个部分。第一部分详细介绍系统要求和所需软件的安装，第二部分详细介绍如何实际构建和运行 CARLA。</p>
<p>构建过程很长（4小时或更长时间）并且涉及多种软件。强烈建议在开始之前完整阅读该指南。</p>
<p>如果您遇到错误或困难，请查看<strong><a href="../build_faq/">常见问题解答</a></strong>页面，其中提供了最常见问题的解决方案。或者，使用 <a href="https://github.com/carla-simulator/carla/discussions">CARLA 论坛</a> 发布您可能有的任何疑问。</p>
<ul>
<li><a href="#part-one-prerequisites"><strong>第一部分：先决条件</strong></a><ul>
<li><a href="#system-requirements">系统要求</a></li>
<li><a href="#software-requirements">软件要求</a><ul>
<li><a href="#minor-installations">基础软件安装</a></li>
<li><a href="#python-dependencies">Python 依赖项</a></li>
<li><a href="#major-installations">主要软件安装</a><ul>
<li><a href="#visual-studio-2019">Visual Studio 2019</a></li>
<li><a href="#unreal-engine">虚幻引擎</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#part-two-build-carla"><strong>第二部分：构建 Carla</strong></a><ul>
<li><a href="#clone-the-carla-repository">克隆 Carla 仓库</a></li>
<li><a href="#get-assets">获取资产</a></li>
<li><a href="#set-unreal-engine-environment-variable">设置虚幻引擎环境变量</a></li>
<li><a href="#build-carla">构建 Carla</a></li>
<li><a href="#other-make-commands">其他 make 命令</a></li>
</ul>
</li>
</ul>
<hr />
<h2 id="_1">第一部分：先决条件</h2>
<p>在本节中，您将找到开始构建 Carla 之前所需的系统要求、次要和主要软件安装以及 Python 依赖项的详细信息。</p>
<h3 id="_2">系统要求</h3>
<ul>
<li><strong>64 位操作系统。</strong> 模拟器应在任何 64 位 Windows 系统中运行。 </li>
<li><strong>165 GB 磁盘空间。</strong> CARLA 本身将占用大约 32 GB，相关的主要软件安装（包括虚幻引擎）将占用大约 133 GB。</li>
<li><strong>足够的 GPU。</strong> CARLA 旨在实现真实模拟，因此服务器至少需要 6 GB GPU，但建议使用 8 GB。强烈建议使用专用 GPU 进行机器学习。</li>
<li><strong>两个 TCP 端口和良好的互联网连接。</strong> 默认端口为 2000 和 2001 。 确保这些端口未被防火墙或任何其他应用程序阻止。 </li>
</ul>
<p>..警告::
    <strong>如果您要从 CARLA 0.9.12 升级到 0.9.13</strong>: 您必须首先将虚幻引擎 4 的 CARLA 分支升级到最新版本。有关升级虚幻引擎 4 的详细信息，请参阅 <a href="#unreal-engine"><strong>虚幻引擎</strong></a> 部分。</p>
<h3 id="_3">软件要求</h3>
<h4 id="_4">基础软件安装</h4>
<ul>
<li><a href="https://cmake.org/download/"><strong>CMake</strong></a> 从简单的配置文件生成标准构建文件。  </li>
<li><a href="https://git-scm.com/downloads"><strong>Git</strong></a> 是一个用于管理 Carla 存储库的版本控制系统。</li>
<li><a href="http://gnuwin32.sourceforge.net/packages/make.htm"><strong>Make</strong></a> 生成可执行文件。必须使用 <strong>Make 的 3.81 版本</strong>，否则构建可能会失败。如果安装了多个版本的 Make，请检查构建 CARLA 时在 PATH 中使用的版本是否为 3.81。您可以通过运行来检查默认的 Make 版本 <code>make --version</code>。</li>
<li><a href="https://www.7-zip.org/"><strong>7Zip</strong></a> 一款文件压缩软件。这是自动解压缩资产文件所必需的，并防止在构建期间由于错误或部分提取大文件而出现错误。</li>
<li><a href="https://www.python.org/downloads/"><strong>Python3 x64</strong></a> 是 CARLA 中的主要脚本语言。安装 x32 版本可能会导致冲突，因此强烈建议卸载它。</li>
</ul>
<div class="admonition 重要">
<p class="admonition-title">重要</p>
<p>确保将上述程序添加到 <a href="https://www.java.com/en/download/help/path.xml">环境路径</a> 中。请记住，添加的路径应与程序的 <code>bin</code> 目录相对应。</p>
</div>
<h4 id="python">Python 依赖项</h4>
<p>从 CARLA 0.9.12 开始，用于可以选择使用 <code>pip3</code> 来安装 Carla 的 Python API。要检查您是否有合适的版本，请运行以下命令：</p>
<pre><code class="language-sh">pip3 -V
</code></pre>
<p>如果您需要升级：</p>
<pre><code class="language-sh">pip3 install --upgrade pip
</code></pre>
<p>您必须安装以下 Python 依赖项：</p>
<pre><code class="language-sh">pip3 install --user setuptools
pip3 install --user wheel
</code></pre>
<h4 id="_5">主要软件安装</h4>
<h5 id="visual-studio-2019">Visual Studio 2019</h5>
<p>从 <a href="https://developerinsider.co/download-visual-studio-2019-web-installer-iso-community-professional-enterprise/">此处</a> 获取 2019 版 Visual Studio 。选择 <strong>社区</strong> 作为免费版本。使用 <strong>Visual Studio 安装程序</strong> 安装三个附加元素： </p>
<ul>
<li><strong>Windows 8.1 SDK.</strong> Select it in the <em>Installation details</em> section on the right or go to the <em>Indivdual Components</em> tab and look under the <em>SDKs, libraries, and frameworks</em> heading.</li>
<li><strong>x64 Visual C++ Toolset.</strong> In the <em>Workloads</em> section, choose <strong>Desktop development with C++</strong>. This will enable a x64 command prompt that will be used for the build. Check that it has been installed correctly by pressing the <code>Windows</code> button and searching for <code>x64</code>. Be careful <strong>not to open a <code>x86_x64</code> prompt</strong>.  </li>
<li><strong>.NET framework 4.6.2</strong>. In the <em>Workloads</em> section, choose <strong>.NET desktop development</strong> and then in the <em>Installation details</em> panel on the right, select <code>.NET Framework 4.6.2 development tools</code>. This is required to build Unreal Engine. </li>
</ul>
<div class="admonition 重要">
<p class="admonition-title">重要</p>
<p>Other Visual Studio versions may cause conflict. Even if these have been uninstalled, some registers may persist. To completely clean Visual Studio from the computer, go to <code>Program Files (x86)\Microsoft Visual Studio\Installer\resources\app\layout</code> and run <code>.\InstallCleanup.exe -full</code>  </p>
</div>
<p><a href="https://learn.microsoft.com/zh-cn/visualstudio/install/use-command-line-parameters-to-install-visual-studio?view=vs-2019">命令行参数安装</a> 。</p>
<h5 id="_6">虚幻引擎</h5>
<p>从版本 0.9.12 开始，Carla 使用虚幻引擎 4.26 的修改版。该分支包含 Carla 特定的补丁。</p>
<p>Be aware that to download this fork of Unreal Engine, <strong>you need to have a GitHub account linked to Unreal Engine's account</strong>. If you don't have this set up, please follow <a href="https://www.unrealengine.com/en-US/ue4-on-github">this guide</a> before going any further.</p>
<p>To build the modified version of Unreal Engine:</p>
<p><strong>1.</strong> In a terminal, navigate to the location you want to save Unreal Engine and clone the <em>carla</em> branch:</p>
<pre><code class="language-sh">    git clone --depth 1 -b carla https://github.com/CarlaUnreal/UnrealEngine.git .
</code></pre>
<div class="admonition 笔记">
<p class="admonition-title">笔记</p>
<p>虚幻引擎文件夹尽可能靠近<code>C:\\</code>，因为如果路径超过一定长度，<code>Setup.bat</code>则会在步骤 3 中返回错误。</p>
</div>
<p><strong>2.</strong> 运行配置脚本：</p>
<pre><code class="language-sh">    Setup.bat
    GenerateProjectFiles.bat
</code></pre>
<p><strong>3.</strong> 编译修改后的引擎：</p>
<blockquote>
<ol>
<li>
<p>Open the <code>UE4.sln</code> file inside the source folder with Visual Studio 2019.</p>
</li>
<li>
<p>In the build bar ensure that you have selected 'Development Editor', 'Win64' and 'UnrealBuildTool' options. Check <a href="https://docs.unrealengine.com/en-US/ProductionPipelines/DevelopmentSetup/BuildingUnrealEngine/index.html">this guide</a> if you need any help. </p>
</li>
<li>
<p>In the solution explorer, right-click <code>UE4</code> and select <code>Build</code>.</p>
</li>
</ol>
</blockquote>
<p><strong>4.</strong> Once the solution is compiled you can open the engine to check that everything was installed correctly by launching the executable <code>Engine\Binaries\Win64\UE4Editor.exe</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the installation was successful, this should be recognised by Unreal Engine's version selector. You can check this by right-clicking on any <code>.uproject</code> file and selecting <code>Switch Unreal Engine version</code>. You should see a pop-up showing <code>Source Build at PATH</code> where PATH is the installation path that you have chosen. If you can not see this selector or the <code>Generate Visual Studio project files</code> when you right-click on <code>.uproject</code> files, something went wrong with the Unreal Engine installation and you will likely need to reinstall it correctly.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>A lot has happened so far. It is highly advisable to restart the computer before continuing.</p>
</div>
<hr />
<h2 id="carla">第二部分：构建 Carla</h2>
<h3 id="carla_1">克隆 Carla 存储库</h3>
<div class="build-buttons">
<p>
<a href="https://github.com/carla-simulator/carla" target="_blank" class="btn btn-neutral" title="Go to the CARLA repository">
<span class="icon icon-github"></span> CARLA repository</a>
</p>
</div>

<p>The button above will take you to the official repository of the project. Either download from there and extract it locally or clone it using the following command:</p>
<pre><code class="language-sh">    git clone https://github.com/carla-simulator/carla
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>master</code> branch contains the current release of CARLA with the latest fixes and features. Previous CARLA versions are tagged with the version name. Always remember to check the current branch in git with the command <code>git branch</code>. </p>
</div>
<h3 id="get-assets">Get assets</h3>
<p>Download the <strong>latest</strong> assets to work with the current version of CARLA by running the following command in the CARLA root folder:</p>
<pre><code class="language-sh">    Update.bat
</code></pre>
<p>The assets will be downloaded and extracted to the appropriate location if have 7zip installed. If you do not have this software installed, you will need to manually extract the file contents to <code>Unreal\CarlaUE4\Content\Carla</code>.</p>
<p>To download the assets for a <strong>specific version</strong> of CARLA:</p>
<ol>
<li>From the root CARLA directory, navigate to <code>\Util\ContentVersions.txt</code>. This document contains the links to the assets for all CARLA releases. </li>
<li>Extract the assets in <code>Unreal\CarlaUE4\Content\Carla</code>. If the path doesn't exist, create it.  </li>
<li>Extract the file with a command similar to the following:</li>
</ol>
<pre><code class="language-sh">    tar -xvzf &lt;assets_file_name&gt;.tar.gz.tar -C C:\path\to\carla\Unreal\CarlaUE4\Content\Carla
</code></pre>
<h3 id="set-unreal-engine-environment-variable">Set Unreal Engine environment variable</h3>
<p>It is necessary to set an environment variable so that CARLA can find the Unreal Engine installation folder. This allows users to choose which specific version of Unreal Engine is to be used. If no environment variable is specified, then CARLA will search for Unreal Engine in the windows registry and use the first version it finds there.  </p>
<p>To set the environment variable:</p>
<ol>
<li>Open Windows Control Panel and go to <code>Advanced System Settings</code> or search for <code>Advanced System Settings</code> in the Windows search bar.  </li>
<li>On the <code>Advanced</code> panel open <code>Environment Variables...</code>.  </li>
<li>Click <code>New...</code> to create the variable.  </li>
<li>Name the variable <code>UE4_ROOT</code> and choose the path to the installation folder of the desired Unreal Engine installation.  </li>
</ol>
<h3 id="build-carla">Build CARLA</h3>
<p>This section outlines the commands to build CARLA. </p>
<ul>
<li>All commands should be run in the root CARLA folder. </li>
<li>Commands should be executed via the <strong>x64 Native Tools Command Prompt for VS 2019</strong>. Open this by clicking the <code>Windows</code> key and searching for <code>x64</code>.</li>
</ul>
<p>There are two parts to the build process for CARLA, compiling the client and compiling the server.</p>
<p><strong>1.</strong> <strong>Compile the Python API client</strong>:</p>
<p>The Python API client grants control over the simulation. Compilation of the Python API client is required the first time you build CARLA and again after you perform any updates. After the client is compiled, you will be able to run scripts to interact with the simulation.</p>
<p>The following command compiles the Python API client:</p>
<pre><code class="language-sh">    make PythonAPI
</code></pre>
<p>The CARLA client library will be built in two distinct, mutually exclusive forms. This gives users the freedom to choose which form they prefer to run the CARLA client code. The two forms include <code>.egg</code> files and <code>.whl</code> files. Choose <strong>one</strong> of the following options below to use the client library:</p>
<p><strong>A. <code>.egg</code> file</strong></p>
<blockquote>
<p>The <code>.egg</code> file does not need to be installed. All of CARLA's example scripts automatically <a href="../build_system/#versions-prior-to-0912">look for this file</a> when importing CARLA.</p>
<p>If you previously installed a CARLA <code>.whl</code>, the <code>.whl</code> will take precedence over an <code>.egg</code> file.</p>
</blockquote>
<p><strong>B. <code>.whl</code> file</strong></p>
<blockquote>
<p>The <code>.whl</code> file should be installed using <code>pip3</code>:</p>
</blockquote>
<pre><code class="language-sh">pip3 install &lt;path/to/wheel&gt;.whl
</code></pre>
<blockquote>
<p>This <code>.whl</code> file cannot be distributed as it is built specifically for your OS.</p>
</blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Issues can arise through the use of different methods to install the CARLA client library and having different versions of CARLA on your system. It is recommended to use virtual environments when installing the <code>.whl</code> and to <a href="../build_faq/#how-do-i-uninstall-the-carla-client-library">uninstall</a> any previously installed client libraries before installing new ones.</p>
</div>
<p><strong>2.</strong> <strong>Compile the server</strong>:</p>
<p>The following command compiles and launches Unreal Engine. Run this command each time you want to launch the server or use the Unreal Engine editor:</p>
<pre><code class="language-sh">    make launch
</code></pre>
<p>The project may ask to build other instances such as <code>UE4Editor-Carla.dll</code> the first time. Agree in order to open the project. During the first launch, the editor may show warnings regarding shaders and mesh distance fields. These take some time to be loaded and the map will not show properly until then.</p>
<p><strong>3.</strong> <strong>Start the simulation</strong>:</p>
<p>Press <strong>Play</strong> to start the server simulation. The camera can be moved with <code>WASD</code> keys and rotated by clicking the scene while moving the mouse around.  </p>
<p>Test the simulator using the example scripts inside <code>PythonAPI\examples</code>.  With the simulator running, open a new terminal for each script and run the following commands to spawn some life into the town and create a weather cycle:</p>
<pre><code class="language-sh">        # Terminal A 
        cd PythonAPI\examples
        pip3 install -r requirements.txt
        python3 generate_traffic.py  

        # Terminal B
        cd PythonAPI\examples
        python3 dynamic_weather.py 
</code></pre>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If the simulation is running at a very low FPS rate, go to <code>Edit -&gt; Editor preferences -&gt; Performance</code> in the Unreal Engine editor and disable <code>Use less CPU when in background</code>.</p>
</div>
<h3 id="other-make-commands">Other make commands</h3>
<p>There are more <code>make</code> commands that you may find useful. Find them in the table below:  </p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>make help</code></td>
<td>Prints all available commands.</td>
</tr>
<tr>
<td><code>make launch</code></td>
<td>Launches CARLA server in Editor window.</td>
</tr>
<tr>
<td><code>make PythonAPI</code></td>
<td>Builds the CARLA client.</td>
</tr>
<tr>
<td><code>make LibCarla</code></td>
<td>Prepares the CARLA library to be imported anywhere.</td>
</tr>
<tr>
<td><code>make package</code></td>
<td>Builds CARLA and creates a packaged version for distribution.</td>
</tr>
<tr>
<td><code>make clean</code></td>
<td>Deletes all the binaries and temporals generated by the build system.</td>
</tr>
<tr>
<td><code>make rebuild</code></td>
<td><code>make clean</code> and <code>make launch</code> both in one command.</td>
</tr>
</tbody>
</table>
<hr />
<p>Read the <strong><a href="../build_faq/">F.A.Q.</a></strong> page or post in the <a href="https://github.com/carla-simulator/carla/discussions">CARLA forum</a> for any issues regarding this guide.  </p>
<p>Now that you have built CARLA, learn how to update the CARLA build or take your first steps in the simulation, and learn some core concepts.</p>
<div class="build-buttons">

<p>
<a href="../build_update" target="_blank" class="btn btn-neutral" title="Learn how to update the build">
Update CARLA</a>
</p>

<p>
<a href="../core_concepts" target="_blank" class="btn btn-neutral" title="Learn about CARLA core concepts">
First steps</a>
</p>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../build_linux/" class="btn btn-neutral float-left" title="Linux 构建"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../build_update/" class="btn btn-neutral float-right" title="更新 Carla">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../build_linux/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../build_update/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../extra.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
