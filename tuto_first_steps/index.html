<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>第一步 - 交通仿真器文档</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u7b2c\u4e00\u6b65";
        var mkdocs_page_input_path = "tuto_first_steps.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 交通仿真器文档
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">主页</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">入门</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../start_introduction/">介绍</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../start_quickstart/">快速启动包安装</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">第一步</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#launching-carla-and-connecting-the-client">Launching CARLA and connecting the client</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#loading-a-map">Loading a map</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#spectator-navigation">Spectator navigation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding-npcs">Adding NPCs</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#add-sensors">Add sensors</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#animate-vehicles-with-traffic-manager">Animate vehicles with traffic manager</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#assign-a-vehicle-as-the-ego-vehicle">Assign a vehicle as the Ego Vehicle</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#choose-your-map">Choose your map</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#choose-your-vehicles">Choose your vehicles</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">构建 Carla</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../build_carla/">构建 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_linux/">Linux 构建</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_windows/">Windows 构建</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_update/">更新 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_system/">构建系统</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker/">Docker 中的 Carla</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_faq/">常问的问题</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">下一步</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_content_authoring_maps/">内容创作 - 地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_content_authoring_vehicles/">内容创作 - 车辆</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Carla 主题</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../foundations/">基础</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_concepts/">核心概念</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_world/">世界和客户端</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_actors/">参与者和蓝图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_map/">地图和导航 </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_sensors/">传感器和数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ts_traffic_simulation_overview/">交通</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development_tutorials/">开发</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../custom_assets_tutorials/">自定义资产</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">高级概念</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_recorder/">记录器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rendering_options/">渲染选项</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_synchrony_timestep/">同步和时间步长</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_benchmarking/">基准性能</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_agents/">Carla 智能体</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">交通仿真</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_traffic_manager/">交通管理器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_sumo/">SUMO 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_scenic/">Scenic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">资源</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../python_api/">Python API 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_cpp/">C++ 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bp_library/">蓝图库</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../catalogue/">Carla 目录</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_recorder_binary_file_format/">记录器二进制文件格式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_sensors/">传感器参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tutorials/">教程</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ext_docs/">扩展文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">插件</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins_carlaviz/">carlaviz — web 可视化器</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ROS 桥接器</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ros_documentation/">ROS 桥文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">自定义地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_map_overview/">Carla 中自定义地图的概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_map/">在 RoadRunner 中创建地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_package/">在CARLA包导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_source/">在 Carla 源构建中导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_alternative/">导入地图的替代方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_manual_map_package/">手动准备地图包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_layers/">自定义地图：分层地图: </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_add_tl/">自定义地图：红绿灯和标志</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_road_painter/">自定义地图：Road painter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_buildings/">自定义地图：程序建筑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_weather_landscape/">自定义地图：天气和景观</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_pedestrian_navigation/">生成行人导航</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">大型地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_overview/">大型地图概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_roadrunner/">在RoadRunner中创建大地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_import/">导入/打包大地图</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（通用）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_add_friction_triggers/">添加摩擦触发器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_vehicle_physics/">控制车辆物理模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_walker_skeletons/">控制行人骨骼</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_openstreetmap/">使用 OpenStreetMap 生成地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_retrieve_data/">检索模拟数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker_unreal/">在 Docker 中构建虚幻引擎和 Carla</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（资产）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_vehicle/">添加新车辆</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_props/">添加新道具</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_create_standalone/">创建独立包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_material_customization/">材质定制</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（开发人员）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_contribute_assets/">如何升级内容</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_sensor/">创建一个传感器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_semantic_tags/">创建语义标签</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_customize_vehicle_suspension/">自定义车辆悬架</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_generate_colliders/">生成详细碰撞</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_make_release/">发布版本</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Carla 生态系统</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ecosys_ansys/">Ansys 实时雷达模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_rllib_integration/">RLlib 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_carsim_integration/">CarSim 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_chrono/">Chrono 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_opendrive/">OpenDRIVE 独立模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_ptv/">PTV-Vissim 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rss/">责任敏感安全</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://carla.readthedocs.io/projects/ros-bridge/en/latest/">机器人操作系统</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">贡献</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_contribution_guidelines/">贡献指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_code_of_conduct/">行为准则</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_coding_standard/">编码标准</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_doc_standard/">文档标准</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">交通仿真器文档</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">入门</li>
      <li class="breadcrumb-item active">第一步</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="first-steps-with-carla">First steps with CARLA</h1>
<p>The CARLA simulator is a comprehensive solution for producing synthetic training data for applications in autonomous driving (AD) and also other robotics applications. CARLA simulates a highly realistic environment emulating real world towns, cities and highways and the vehicles and other objects that occupy these driving spaces. </p>
<p>The CARLA simulator is further useful as an evaluation and testing environment. You can deploy the AD agents you have trained within the simulation to test and evaluate their performance and safety, all within the security of a simulated environment, with no risk to hardware or other road users.</p>
<p>In this tutorial, we will cover a standard workflow in CARLA, from launching the server and connecting the client, through to adding vehicles, sensors and generating training data to use for machine learning. This tutorial is meant to be light on details and go as efficiently as possible through the key steps in using CARLA to produce machine learning training data. For further details on each part of the workflow, such as the multitude of vehicles available in the blueprint library or the alternative types of sensors available, please consult the links in the text or browse the left menu. </p>
<ul>
<li><a href="#Launching-carla-and-connecting-the-client"><strong>Launching CARLA</strong></a>  </li>
<li><a href="#loading-a-map"><strong>Loading a map</strong></a> </li>
<li><a href="#spectator-navigation"><strong>Spectator navigation</strong></a>  </li>
<li><a href="#adding-npcs"><strong>Adding NPCs</strong></a>  </li>
<li><a href="#add-sensors"><strong>Add sensors</strong></a>  </li>
<li><a href="#animate-vehicles-with-traffic-manager"><strong>Animate vehicles</strong></a>  </li>
<li><a href="#assign-a-vehicle-as-the-ego-vehicle"><strong>Assign a vehicle as the Ego Vehicle</strong></a></li>
<li><a href="#choose-your-map"><strong>Choose your map</strong></a> </li>
<li><a href="#choose-your-vehicles"><strong>Choose your vehicles</strong></a> </li>
</ul>
<h2 id="launching-carla-and-connecting-the-client">Launching CARLA and connecting the client</h2>
<p>CARLA can be launched using the command line using the executable in Windows or the shell script in Linux. Follow the installation instructions for <a href="../start_quickstart/"><strong>Linux</strong></a> and <a href="../start_quickstart/"><strong>Windows</strong></a> then <a href="../start_quickstart/#running-carla"><strong>launch CARLA</strong></a> from the command line:</p>
<pre><code class="language-sh">cd /carla/root
./CarlaUE4.sh
</code></pre>
<p>To manipulate CARLA through the Python API, we need to connect the Python client to the server through an open port. The client controls the simulator through the <a href="../foundations/#world-and-client"><strong>client and world objects</strong></a> Open a Python notebook or create a new script, then add the following code to the start of the script or the main function:</p>
<pre><code class="language-py">import carla
import random

# Connect to the client and retrieve the world object
client = carla.Client('localhost', 2000)
world = client.get_world()

</code></pre>
<p>The <a href="python_api#carlaclient"><strong>client</strong></a> object serves to maintain the client's connection to the server and has a number of functions for applying commands and loading or exporting data. We can load an alternative map or reload the current one (resetting to initial state) using the client object.</p>
<p>The port can be chosen as any available port and is set to 2000 by default, you can also choose a host different from <em>localhost</em> by using a computer's IP address. This way, the CARLA server can be run on a networked machine, while the python client can be run from a personal computer. This is particularly useful for differentiating the GPU used for running the CARLA simulator and that used for neural network training, both of which can be highly demanding on graphics hardware.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following presumes that CARLA is running in the default <a href="../adv_synchrony_timestep/"><strong>asynchronous</strong></a> mode. If you have engaged synchronous mode, some of the code in the following sections might not work as expected.</p>
</div>
<h2 id="loading-a-map">Loading a map</h2>
<p>In the CARLA API, the <a href="../python_api/#carla.World"><strong>world</strong></a> object provides access to all elements of the simulation, including the map, objects within the map, such as buildings, traffic lights, vehicles and pedestrians. The CARLA server normally loads a default map (normally Town10). If you want to launch CARLA with an alternate map, use the <code>config.py</code> script:</p>
<pre><code class="language-sh">./config.py --map Town05 
</code></pre>
<p>We can also use the world object to load a map from the client:</p>
<pre><code class="language-py">client.load_world('Town05')

</code></pre>
<p>Please find more information about CARLA maps <a href="../core_map/"><strong>here</strong></a>.</p>
<h2 id="spectator-navigation">Spectator navigation</h2>
<p>The spectator is a view into the simulation. By default, the spectator opens in a new window when you run the CARLA server on a computer with a screen attached, unless you specify the <code>-RenderOffScreen</code> command line option. </p>
<p>The spectator is helpful to visualize your simulation. Using the spectator, you can familiarize yourself with the map you've loaded, and see the result of any changes you are making, such as adding vehicles, changing the weather, turning on/off various layers of the map and for debugging purposes. </p>
<p>You can fly the spectator around the world using the mouse to control the pitch and yaw of the spectator view and the QWE-ASD keys to move the spectator:</p>
<ul>
<li>Q - move upwards (towards the top edge of the window)</li>
<li>
<p>E - move downwards (towards the lower edge of the window)</p>
</li>
<li>
<p>W - move forwards</p>
</li>
<li>S - move backwards</li>
<li>A - move left</li>
<li>D - move right</li>
</ul>
<p>Left click and drag the mouse in the spectator window up and down to control pitch and left and right to control yaw.</p>
<p><img alt="flying_spectator" src="../img/tuto_G_getting_started/flying_spectator.gif" /></p>
<p>The spectator and its properties can be accessed and manipulated through the Python API:</p>
<pre><code class="language-py"># Retrieve the spectator object
spectator = world.get_spectator()

# Get the location and rotation of the spectator through its transform
transform = spectator.get_transform()

location = transform.location
rotation = transform.rotation

# Set the spectator with an empty transform
spectator.set_transform(carla.Transform())
# This will set the spectator at the origin of the map, with 0 degrees
# pitch, yaw and roll - a good way to orient yourself in the map

</code></pre>
<h2 id="adding-npcs">Adding NPCs</h2>
<p>Now we've loaded the map and the server is up and running we now need to populate our simulation with some vehicles to simulate a real environment with traffic and other road users or non-player characters (NPCs).</p>
<p>To spawn vehicles, first, we need to select the vehicles we want from the blueprint library. </p>
<pre><code class="language-py"># Get the blueprint library and filter for the vehicle blueprints
vehicle_blueprints = world.get_blueprint_library().filter('*vehicle*')
</code></pre>
<p>Now we have the blueprints, we need to find some appropriate spots in the map to spawn our vehicles. Each CARLA map provides pre-defined spawn points spread evenly throughout the map on the roads for this purpose.</p>
<pre><code class="language-py"># Get the map's spawn points
spawn_points = world.get_map().get_spawn_points()

# Spawn 50 vehicles randomly distributed throughout the map 
# for each spawn point, we choose a random vehicle from the blueprint library
for i in range(0,50):
    world.try_spawn_actor(random.choice(vehicle_blueprints), random.choice(spawn_points))
</code></pre>
<p>Now we should also add a vehicle that will be the centerpoint of our simulation. To train an autonomous agent we need to simulate a the vehicle that it the autonomous agent will control. In CARLA parlance, we often refer to this vehicle as the "Ego vehicle". </p>
<pre><code class="language-py">ego_vehicle = world.spawn_actor(random.choice(vehicle_blueprints), random.choice(spawn_points))
</code></pre>
<p>In addition to vehicles, CARLA also provides pedestrians to add to simulations to simulate realistic driving scenarios. Vehicles and pedestrians are referred to as <strong>actors</strong> in the CARLA parlance, learn more about them <a href="../core_actors/"><strong>here</strong></a>.</p>
<h2 id="add-sensors">Add sensors</h2>
<p>Modern autonomous vehicles understand and interpret their environment through an array of attached sensors. These sensors include things such as optical video cameras, optical flow cameras, LIDARs, RADARs and accelerometers. CARLA has models of numerous types of sensors built in to create training data for machine learning. The sensors can be attached to a vehicle, or they can be attached to a fixed point to model for example a CCTV camera.</p>
<p>Here we will attach a standard camera sensor to the ego vehicle to record some video data:</p>
<pre><code class="language-py"># Create a transform to place the camera on top of the vehicle
camera_init_trans = carla.Transform(carla.Location(z=1.5))

# We create the camera through a blueprint that defines its properties
camera_bp = world.get_blueprint_library().find('sensor.camera.rgb')

# We spawn the camera and attach it to our ego vehicle
camera = world.spawn_actor(camera_bp, camera_init_trans, attach_to=ego_vehicle)
</code></pre>
<p>Once we have spawned the camera, we need to set it recording through the <code>listen()</code> method. The listen method takes as argument a callback that defines what to do with the data. You can either stream it to another program or save it to disk.</p>
<p>We will use a lambda function as a callback to save the data to disk:</p>
<pre><code class="language-py"># Start camera with PyGame callback
camera.listen(lambda image: image.save_to_disk('out/%06d.png' % image.frame))
</code></pre>
<p>This will save the data to the <code>out/</code> folder as a series of PNG image files named according to the simulation frame number.</p>
<p>There are a multitude of different types of sensors to choose from. <a href="../core_sensors/"><strong>Here</strong></a> you can delve deeper into the array of sensors available and how to use them.</p>
<h2 id="animate-vehicles-with-traffic-manager">Animate vehicles with traffic manager</h2>
<p>Now we've added our traffic and ego vehicle to the simulation and started recording camera data, we now need to set the vehicles in motion using the <a href="../adv_traffic_manager/"><strong>Traffic manager</strong></a>. The Traffic manager is a component of CARLA that controls vehicles to autonomously move around the roads of the map within the simulation, following the road conventions and behaving like real road users. </p>
<p>We can find all the vehicles in the simulation using the <code>world.get_actors()</code> method, filtering for all the vehicles. We can then use the <code>set_autopilot()</code> method to hand over control of the vehicle to the Traffic Manager.</p>
<pre><code class="language-py">for vehicle in world.get_actors().filter('*vehicle*'):
    vehicle.set_autopilot(True)
</code></pre>
<p>Now your simulation is running, with numerous vehicles driving around the map and a camera recording data from one of those vehicles. This data can then be used to feed a machine learning algorithm for training an autonomous driving agent. The Traffic manager has many functions for customising traffic behaviour, learn more <a href="../tuto_G_traffic_manager/"><strong>here</strong></a>.</p>
<p>This is the most basic possible set up for a simulation, now you can go into further details deeper into documentation about the many extra sensors you can use to generate data, and the many other features of CARLA that can make your simulations more detailed and more realistic. </p>
<hr />
<h2 id="assign-a-vehicle-as-the-ego-vehicle">Assign a vehicle as the Ego Vehicle</h2>
<p>The <strong>Ego Vehicle</strong> is an important concept to bear in mind when using CARLA. The Ego Vehicle refers to the vehicle that will be the focus of the simulation. In most CARLA use cases it's likely to be the vehicle to which you will attach your sensors and/or the vehicle that your autonomous driving machine learning stack will control. It is important because it serves as the basis for some simulation operations that help improve the efficiency of the simulation, like for example:</p>
<ul>
<li>
<p><strong>Loading map tiles for Large Maps</strong>: Large Maps (like Town 12) are made up of tiles to that are only loaded when needed to improve CARLA performance. The position of the Ego Vehicle dictates which tiles are used. Only the tiles nearest the Ego Vehicle will be loaded.</p>
</li>
<li>
<p><strong>Hybrid Physics Mode</strong>: if your simulation contains a lot of vehicles controlled by the Traffic Manager, calculating physics for all of these vehicles is very computationally expensive. The <a href="../adv_traffic_manager/#hybrid-physics-mode">Hybrid Physics Mode</a> enables physics calculation to be limited to the vehicles in the vicinity of the Ego Vehicle, hence saving computing resources.</p>
</li>
</ul>
<p>To define the Ego Vehicle, you should set the <code>role_name</code> attribute of the vehicle <a href="../python_api/#carlaactor">carla.Actor</a> object's <a href="../python_api/#carlaactorblueprint">blueprint</a> when you are spawning your Ego Vehicle:</p>
<pre><code class="language-py">
ego_bp = world.get_blueprint_library().find('vehicle.lincoln.mkz_2020')

ego_bp.set_attribute('role_name', 'hero')

ego_vehicle = world.spawn_actor(ego_bp, random.choice(spawn_points))

</code></pre>
<hr />
<h2 id="choose-your-map">Choose your map</h2>
<p><img alt="maps_montage" src="../img/catalogue/maps/maps_montage.webp" /></p>
<p>CARLA comes loaded with several pre-made maps focused on providing a diversity of features. The maps present a range of environments such as urban, rural and residential. There are also differing architectural styles and also a multitude of different road layouts from unmarked rural roads to multi-lane highways. Browse the map guides in the <a href="../catalogue/">catalogue</a> or in the table below. </p>
<table>
<thead>
<tr>
<th>Town</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../map_town01/"><strong>Town01</strong></a></td>
<td>A small, simple town with a river and several bridges.</td>
</tr>
<tr>
<td><a href="../map_town02/"><strong>Town02</strong></a></td>
<td>A small simple town with a mixture of residential and commercial buildings.</td>
</tr>
<tr>
<td><a href="../map_town03/"><strong>Town03</strong></a></td>
<td>A larger, urban map with a roundabout and large junctions.</td>
</tr>
<tr>
<td><a href="../map_town04/"><strong>Town04</strong></a></td>
<td>A small town embedded in the mountains with a special "figure of 8" <em>infinite</em> highway.</td>
</tr>
<tr>
<td><a href="../map_town05/"><strong>Town05</strong></a></td>
<td>Squared-grid town with cross junctions and a bridge. It has multiple lanes per direction. Useful to perform lane changes.</td>
</tr>
<tr>
<td><a href="../map_town06/"><strong>Town06</strong></a></td>
<td>Long many lane highways with many highway entrances and exits. It also has a <a href="https://en.wikipedia.org/wiki/Michigan_left"><strong>Michigan left</strong></a>.</td>
</tr>
<tr>
<td><a href="../map_town07/"><strong>Town07</strong></a></td>
<td>A rural environment with narrow roads, corn, barns and hardly any traffic lights.</td>
</tr>
<tr>
<td><strong>Town08</strong></td>
<td>Secret "unseen" town used for the <a href="https://leaderboard.carla.org/">Leaderboard</a> challenge</td>
</tr>
<tr>
<td><strong>Town09</strong></td>
<td>Secret "unseen" town used for the <a href="https://leaderboard.carla.org/">Leaderboard</a> challenge</td>
</tr>
<tr>
<td><a href="../map_town10/"><strong>Town10</strong></a></td>
<td>A downtown urban environment with skyscrapers, residential buildings and an ocean promenade.</td>
</tr>
<tr>
<td><strong>Town11</strong></td>
<td>A Large Map that is undecorated.</td>
</tr>
<tr>
<td><a href="../map_town12/"><strong>Town12</strong></a></td>
<td>A Large Map with numerous different regions, including high-rise, residential and rural environments.</td>
</tr>
</tbody>
</table>
<p>You can browse the available maps in your CARLA installation:</p>
<pre><code class="language-py">client.get_available_maps()
</code></pre>
<p>This will include maps that you have built yourself or imported.</p>
<p>When you choose a map, load it like so:</p>
<pre><code class="language-py">client.load_world('Town03_Opt')
</code></pre>
<hr />
<h2 id="choose-your-vehicles">Choose your vehicles</h2>
<p><img alt="vehicles_overview" src="../img/catalogue/vehicles/vehicle_montage.webp" /></p>
<p>CARLA provides a library of vehicles to fill your simulation with traffic. Browse the vehicle models in the <a href="../catalogue_vehicles/">CARLA vehicle catalogue</a>. </p>
<p>You can see all available vehicle blueprints by filtering the blueprint library. </p>
<pre><code class="language-py">for bp in world.get_blueprint_library().filter('vehicle'):
    print(bp.id)
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../start_quickstart/" class="btn btn-neutral float-left" title="快速启动包安装"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../build_carla/" class="btn btn-neutral float-right" title="构建 Carla">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../start_quickstart/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../build_carla/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../extra.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
